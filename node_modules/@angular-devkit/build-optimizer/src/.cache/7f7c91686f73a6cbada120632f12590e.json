{"remainingRequest":"/home/vdsancheza/Documents/MeanStack/some-grid/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/home/vdsancheza/Documents/MeanStack/some-grid/node_modules/ag-grid-enterprise/dist/lib/sideBar/providedPanels/columns/dropZone/dropZoneColumnComp.js","dependencies":[{"path":"/home/vdsancheza/Documents/MeanStack/some-grid/node_modules/ag-grid-enterprise/dist/lib/sideBar/providedPanels/columns/dropZone/dropZoneColumnComp.js","mtime":499162500000},{"path":"/home/vdsancheza/Documents/MeanStack/some-grid/node_modules/cache-loader/dist/cjs.js","mtime":1538485928640},{"path":"/home/vdsancheza/Documents/MeanStack/some-grid/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["// ag-grid-enterprise v19.0.0\n\"use strict\";\nvar __extends = /*@__PURE__*/ require(\"tslib\").__extends;\nvar __decorate = /*@__PURE__*/ require(\"tslib\").__decorate;\nvar __metadata = /*@__PURE__*/ require(\"tslib\").__metadata;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar main_1 = require(\"ag-grid-community/main\");\nvar aggFuncService_1 = require(\"../../../../aggregation/aggFuncService\");\nvar virtualList_1 = require(\"../../../../rendering/virtualList\");\nvar DropZoneColumnComp = /*@__PURE__*/ (function (_super) {\n    __extends(DropZoneColumnComp, _super);\n    function DropZoneColumnComp(column, dragSourceDropTarget, ghost, valueColumn) {\n        var _this = _super.call(this) || this;\n        _this.popupShowing = false;\n        _this.valueColumn = valueColumn;\n        _this.column = column;\n        _this.dragSourceDropTarget = dragSourceDropTarget;\n        _this.ghost = ghost;\n        return _this;\n    }\n    DropZoneColumnComp.prototype.init = function () {\n        this.setTemplate(DropZoneColumnComp.TEMPLATE);\n        this.displayName = this.columnController.getDisplayNameForColumn(this.column, 'columnDrop');\n        this.setupComponents();\n        if (!this.ghost && !this.gridOptionsWrapper.isFunctionsReadOnly()) {\n            this.addDragSource();\n        }\n    };\n    DropZoneColumnComp.prototype.addDragSource = function () {\n        var _this = this;\n        var dragSource = {\n            type: main_1.DragSourceType.ToolPanel,\n            eElement: this.eDragHandle,\n            dragItemCallback: function () { return _this.createDragItem(); },\n            dragItemName: this.displayName,\n            dragSourceDropTarget: this.dragSourceDropTarget\n        };\n        this.dragAndDropService.addDragSource(dragSource, true);\n        this.addDestroyFunc(function () { return _this.dragAndDropService.removeDragSource(dragSource); });\n    };\n    DropZoneColumnComp.prototype.createDragItem = function () {\n        var visibleState = {};\n        visibleState[this.column.getId()] = this.column.isVisible();\n        return {\n            columns: [this.column],\n            visibleState: visibleState\n        };\n    };\n    DropZoneColumnComp.prototype.setupComponents = function () {\n        this.setTextValue();\n        this.setupRemove();\n        if (this.ghost) {\n            main_1.Utils.addCssClass(this.getGui(), 'ag-column-drop-cell-ghost');\n        }\n        if (this.valueColumn && !this.gridOptionsWrapper.isFunctionsReadOnly()) {\n            this.addGuiEventListener('click', this.onShowAggFuncSelection.bind(this));\n        }\n    };\n    DropZoneColumnComp.prototype.setupRemove = function () {\n        var _this = this;\n        main_1.Utils.setVisible(this.btRemove, !this.gridOptionsWrapper.isFunctionsReadOnly());\n        this.addDestroyableEventListener(this.btRemove, 'click', function (mouseEvent) {\n            var agEvent = { type: DropZoneColumnComp.EVENT_COLUMN_REMOVE };\n            _this.dispatchEvent(agEvent);\n            mouseEvent.stopPropagation();\n        });\n        var touchListener = new main_1.TouchListener(this.btRemove);\n        this.addDestroyableEventListener(touchListener, main_1.TouchListener.EVENT_TAP, function (event) {\n            var agEvent = { type: DropZoneColumnComp.EVENT_COLUMN_REMOVE };\n            _this.dispatchEvent(agEvent);\n        });\n        this.addDestroyFunc(touchListener.destroy.bind(touchListener));\n    };\n    DropZoneColumnComp.prototype.setTextValue = function () {\n        var displayValue;\n        if (this.valueColumn) {\n            var aggFunc = this.column.getAggFunc();\n            // if aggFunc is a string, we can use it, but if it's a function, then we swap with 'func'\n            var aggFuncString = (typeof aggFunc === 'string') ? aggFunc : 'agg';\n            var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n            var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);\n            displayValue = aggFuncStringTranslated + \"(\" + this.displayName + \")\";\n        }\n        else {\n            displayValue = this.displayName;\n        }\n        this.eText.innerHTML = displayValue;\n    };\n    DropZoneColumnComp.prototype.onShowAggFuncSelection = function () {\n        var _this = this;\n        if (this.popupShowing) {\n            return;\n        }\n        this.popupShowing = true;\n        var virtualList = new virtualList_1.VirtualList();\n        var rows = this.aggFuncService.getFuncNames(this.column);\n        virtualList.setModel({\n            getRow: function (index) { return rows[index]; },\n            getRowCount: function () { return rows.length; }\n        });\n        this.context.wireBean(virtualList);\n        var ePopup = main_1.Utils.loadTemplate('<div class=\"ag-select-agg-func-popup\"></div>');\n        ePopup.style.top = '0px';\n        ePopup.style.left = '0px';\n        ePopup.appendChild(virtualList.getGui());\n        // ePopup.style.height = this.gridOptionsWrapper.getAggFuncPopupHeight() + 'px';\n        ePopup.style.width = this.getGui().clientWidth + 'px';\n        var popupHiddenFunc = function () {\n            virtualList.destroy();\n            _this.popupShowing = false;\n        };\n        var hidePopup = this.popupService.addAsModalPopup(ePopup, true, popupHiddenFunc);\n        virtualList.setComponentCreator(this.createAggSelect.bind(this, hidePopup));\n        this.popupService.positionPopupUnderComponent({\n            type: 'aggFuncSelect',\n            eventSource: this.getGui(),\n            ePopup: ePopup,\n            keepWithinBounds: true,\n            column: this.column\n        });\n        virtualList.refresh();\n    };\n    DropZoneColumnComp.prototype.createAggSelect = function (hidePopup, value) {\n        var _this = this;\n        var itemSelected = function () {\n            hidePopup();\n            if (_this.gridOptionsWrapper.isFunctionsPassive()) {\n                var event_1 = {\n                    type: main_1.Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,\n                    columns: [_this.column],\n                    aggFunc: value,\n                    api: _this.gridApi,\n                    columnApi: _this.columnApi\n                };\n                _this.eventService.dispatchEvent(event_1);\n            }\n            else {\n                _this.columnController.setColumnAggFunc(_this.column, value, \"toolPanelDragAndDrop\");\n            }\n        };\n        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();\n        var aggFuncString = value.toString();\n        var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);\n        var comp = new AggItemComp(itemSelected, aggFuncStringTranslated);\n        return comp;\n    };\n    DropZoneColumnComp.EVENT_COLUMN_REMOVE = 'columnRemove';\n    DropZoneColumnComp.TEMPLATE = \"<span class=\\\"ag-column-drop-cell\\\">\\n          <span class=\\\"ag-column-drag\\\" ref=\\\"eDragHandle\\\"></span>\\n          <span class=\\\"ag-column-drop-cell-text\\\"></span>\\n          <span class=\\\"ag-column-drop-cell-button\\\">&#10006;</span>\\n        </span>\";\n    __decorate([\n        main_1.Autowired('dragAndDropService'),\n        __metadata(\"design:type\", main_1.DragAndDropService)\n    ], DropZoneColumnComp.prototype, \"dragAndDropService\", void 0);\n    __decorate([\n        main_1.Autowired('columnController'),\n        __metadata(\"design:type\", main_1.ColumnController)\n    ], DropZoneColumnComp.prototype, \"columnController\", void 0);\n    __decorate([\n        main_1.Autowired('context'),\n        __metadata(\"design:type\", main_1.Context)\n    ], DropZoneColumnComp.prototype, \"context\", void 0);\n    __decorate([\n        main_1.Autowired('popupService'),\n        __metadata(\"design:type\", main_1.PopupService)\n    ], DropZoneColumnComp.prototype, \"popupService\", void 0);\n    __decorate([\n        main_1.Autowired('aggFuncService'),\n        __metadata(\"design:type\", aggFuncService_1.AggFuncService)\n    ], DropZoneColumnComp.prototype, \"aggFuncService\", void 0);\n    __decorate([\n        main_1.Autowired('gridOptionsWrapper'),\n        __metadata(\"design:type\", main_1.GridOptionsWrapper)\n    ], DropZoneColumnComp.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate([\n        main_1.Autowired('eventService'),\n        __metadata(\"design:type\", main_1.EventService)\n    ], DropZoneColumnComp.prototype, \"eventService\", void 0);\n    __decorate([\n        main_1.Autowired('columnApi'),\n        __metadata(\"design:type\", main_1.ColumnApi)\n    ], DropZoneColumnComp.prototype, \"columnApi\", void 0);\n    __decorate([\n        main_1.Autowired('gridApi'),\n        __metadata(\"design:type\", main_1.GridApi)\n    ], DropZoneColumnComp.prototype, \"gridApi\", void 0);\n    __decorate([\n        main_1.QuerySelector('.ag-column-drop-cell-text'),\n        __metadata(\"design:type\", HTMLElement)\n    ], DropZoneColumnComp.prototype, \"eText\", void 0);\n    __decorate([\n        main_1.QuerySelector('.ag-column-drop-cell-button'),\n        __metadata(\"design:type\", HTMLElement)\n    ], DropZoneColumnComp.prototype, \"btRemove\", void 0);\n    __decorate([\n        main_1.RefSelector('eDragHandle'),\n        __metadata(\"design:type\", HTMLElement)\n    ], DropZoneColumnComp.prototype, \"eDragHandle\", void 0);\n    __decorate([\n        main_1.PostConstruct,\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", void 0)\n    ], DropZoneColumnComp.prototype, \"init\", null);\n    return DropZoneColumnComp;\n}(main_1.Component));\nexports.DropZoneColumnComp = DropZoneColumnComp;\nvar AggItemComp = /*@__PURE__*/ (function (_super) {\n    __extends(AggItemComp, _super);\n    function AggItemComp(itemSelected, value) {\n        var _this = _super.call(this, '<div class=\"ag-select-agg-func-item\"/>') || this;\n        _this.getGui().innerText = value;\n        _this.value = value;\n        _this.addGuiEventListener('click', itemSelected);\n        return _this;\n    }\n    return AggItemComp;\n}(main_1.Component));\n",null]}